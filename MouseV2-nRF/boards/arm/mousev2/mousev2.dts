// Copyright (c) 2021 Nordic Semiconductor ASA
// SPDX-License-Identifier: Apache-2.0

/dts-v1/;
#include <nordic/nrf52832_qfaa.dtsi>

/ {
	model = "MouseV2";
	compatible = "taras-radchenko,mousev2";

	chosen {
		zephyr,sram = &sram0;
		zephyr,flash = &flash0;
		zephyr,code-partition = &slot0_partition;
	};

	leds {
		compatible = "gpio-leds";
		led_green: led_green {
			gpios = <&gpio0 9 GPIO_ACTIVE_HIGH>;
			label = "Green LED";
		};
		led_red: led_red {
			gpios = <&gpio0 10 GPIO_ACTIVE_HIGH>;
			label = "Red LED";
		};
	};

	vdd_pwr: vdd-switch {
		compatible = "regulator-fixed-sync", "regulator-fixed";
		label = "VDD switch";
		regulator-name = "vdd-switch";
		enable-gpios = <&gpio0 22 GPIO_ACTIVE_LOW>;
		startup-delay-us = <1000>;
		regulator-boot-on;
	};
};

&gpiote {
	status = "okay";
};

&gpio0 {
	status = "okay";
};

&spi0 {
	status = "okay";
	compatible = "nordic,nrf-spi";
	sck-pin = <15>;
	miso-pin = <17>;
	mosi-pin = <18>;
	cs-gpios = <&gpio0 20 GPIO_ACTIVE_LOW>, <&gpio0 11 GPIO_ACTIVE_LOW>;  // ADNS (20), AVR(11)

	adns7530@0 {
		compatible = "pixart,adns7530";
		reg = <0>;
		mot-gpios = <&gpio0 19 GPIO_ACTIVE_LOW>;
		spi-max-frequency = <1000000>;
		label = "ADNS-7530";
		vin-supply = <&vdd_pwr>;
	};
};

&flash0 {
	partitions {
		compatible = "fixed-partitions";
		#address-cells = <1>;
		#size-cells = <1>;

		boot_partition: partition@0 {
			label = "mcuboot";
			reg = <0x0 0xc000>;
		};
		slot0_partition: partition@c000 {
			label = "image-0";
			reg = <0xc000 0x32000>;
		};
		slot1_partition: partition@3e000 {
			label = "image-1";
			reg = <0x3e000 0x32000>;
		};
		scratch_partition: partition@70000 {
			label = "image-scratch";
			reg = <0x70000 0xa000>;
		};
		storage_partition: partition@7a000 {
			label = "storage";
			reg = <0x7a000 0x6000>;
		};
	};
};
